contract counterSpecs(r : bool) returns (c : int);
let
    guarantee c >= 0;

    mode reset (
        require r;
        ensure c = 0;
    );

    mode increasing (
        require not r;
        ensure true -> c > pre c;
    );
tel

node counter(reset : bool) returns (count : int);
(*@contract import counterSpecs(reset) returns (count); *)

let
    count = 0 -> if reset then 0 else (pre count) + 1;
tel

